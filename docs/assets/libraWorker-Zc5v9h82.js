(function(){"use strict";importScripts("/libra-chess-ui/wasm_exec.js");let i,n,o,c,b;async function f(){const r=new self.Go,a=await(await fetch("/libra-chess-ui/libra.wasm")).arrayBuffer(),{instance:s}=await WebAssembly.instantiate(a,r.importObject);r.run(s),i=self.libraFromFEN,n=self.libraToFEN,o=self.libraMove,c=self.libraLoadInitial,b=self.libraIterativeDeepeningSearch}self.onmessage=async r=>{const{type:t,payload:a,id:s}=r.data;i||await f();let e;try{switch(t){case"libraFromFEN":i(a.fen),e=null;break;case"libraToFEN":e=n();break;case"libraMove":e=o(a.move);break;case"libraLoadInitial":c(),e=null;break;case"libraIterativeDeepeningSearch":e=b(a.ms);break;default:throw new Error("Unknown message type: "+t)}self.postMessage({id:s,result:e})}catch(l){self.postMessage({id:s,error:l instanceof Error?l.message:String(l)})}}})();
