(function(){"use strict";importScripts("/libra-chess-ui/wasm_exec.js");async function n(){const r=new self.Go,e=await(await fetch("/libra-chess-ui/libra.wasm?v=1.0.6")).arrayBuffer(),{instance:s}=await WebAssembly.instantiate(e,r.importObject);r.run(s),libra=self.libra}self.onmessage=async r=>{const{type:i,payload:e,id:s}=r.data;typeof libra>"u"&&await n();let a;try{switch(i){case"libraFromFEN":libra.fromFEN(e.fen),a=null;break;case"libraToFEN":a=libra.toFEN();break;case"libraMove":a=libra.move(e.move);break;case"libraLoadInitial":libra.loadInitial(),a=null;break;case"libraIterativeDeepeningSearch":a=libra.iterativeDeepeningSearch(e.ms);break;case"libraZobristHash":a=libra.zobristHash();break;default:throw new Error("Unknown message type: "+i)}self.postMessage({id:s,result:a})}catch(t){self.postMessage({id:s,error:t instanceof Error?t.message:String(t)})}}})();
