(function(){"use strict";importScripts("/public/wasm_exec.js");let s,n,o,c,b;async function f(){const r=new self.Go,a=await(await fetch("/public/libra.wasm")).arrayBuffer(),{instance:i}=await WebAssembly.instantiate(a,r.importObject);r.run(i),s=self.libraFromFEN,n=self.libraToFEN,o=self.libraMove,c=self.libraLoadInitial,b=self.libraIterativeDeepeningSearch}self.onmessage=async r=>{const{type:t,payload:a,id:i}=r.data;s||await f();let e;try{switch(t){case"libraFromFEN":s(a.fen),e=null;break;case"libraToFEN":e=n();break;case"libraMove":e=o(a.move);break;case"libraLoadInitial":c(),e=null;break;case"libraIterativeDeepeningSearch":e=b(a.ms);break;default:throw new Error("Unknown message type: "+t)}self.postMessage({id:i,result:e})}catch(l){self.postMessage({id:i,error:l instanceof Error?l.message:String(l)})}}})();
